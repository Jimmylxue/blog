# æ‹–æ‹½å…¶å®æ²¡æœ‰é‚£ä¹ˆéš¾

## å‰è¨€

å¤§å®¶æ˜¯å¦åœ¨ä¸ªäººå¼€å‘æˆ–è€…å…¬å¸é¡¹ç›®ä¸­é‡åˆ°è¿‡æ‹–æ‹½ç›¸å…³çš„éœ€æ±‚å‘¢ï¼Ÿä¹‹å‰æˆ‘ä»æœªå¤„ç†è¿‡è¿™å—çš„å†…å®¹ï¼Œç¢°å·§ä¸Šå›æ¥åˆ°äº†è¿™ä¹ˆä¸€ä¸ªæ‹–æ‹½çš„éœ€æ±‚ã€‚å½“æ—¶å¿ƒé‡Œä¸€å’¯å™”ï¼šâ€œå®Œäº†ï¼è¿™ä¸ªæˆ‘æ²¡æœ‰å¤„ç†è¿‡ï¼Œä¸ä¼šå•Šï¼ğŸ˜­â€ã€‚

ä¸è¿‡åœ¨çœŸæ­£å»äº†è§£äº†ä¸€ä¸‹è¿™å—çš„å†…å®¹ï¼Œå‘ç°å…¶å®æ‹–æ‹½ä¹Ÿæ²¡æœ‰æˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆéš¾ï¼ˆå¯¹äºwebç«¯æ¥è¯´ï¼‰ã€‚ç°åœ¨åŸç”Ÿå¯¹äºæ‹–æ‹½çš„æ”¯æŒå·²ç»éå¸¸å¥½äº†ã€‚

## æ•ˆæœ

æˆ‘ä»¬æ¥çœ‹è¿™ä¹ˆä¸€ä¸ªæ•ˆæœï¼š

![Kapture 2023-12-30 at 10.46.24](https://image.jimmyxuexue.top/img/202312301048064.gif)

ç¬¬ä¸€çœ¼çœ‹ç€æ˜¯ä¸æ˜¯è§‰å¾—è¿˜æœ‰ç‚¹å¤æ‚ï¼Œç›‘å¬é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ï¼Œç›‘å¬é¼ æ ‡ç§»åŠ¨ï¼Œç›‘å¬é¼ æ ‡æ”¾å¼€ï¼Œæƒ³æƒ³å°±å®³æ€•ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯ï¼Œä»£ç åªæœ‰è¿™ä¹ˆå‡ è¡Œï¼š

```html
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>æ‹–æ‹½demo</title>
		<style>
			body {
				display: flex;
			}
			.box1,
			.box2 {
				width: 300px;
				height: 600px;
				border: 1px solid #ccc;
			}
			.box2 {
				margin-left: 50px;
			}

			.item {
				width: 100px;
				height: 50px;
				display: flex;
				justify-content: center;
				align-items: center;
				background-color: skyblue;
				margin-top: 10px;
				margin-left: 10px;
			}
		</style>
	</head>
	<body>
		<div class="box1">
			<div class="item" draggable="true" ondragstart="dragStart(event,'æ‰‹æœº')">
				æ‰‹æœº
			</div>
			<div class="item" draggable="true" ondragstart="dragStart(event,'ç”µè„‘')">
				ç”µè„‘
			</div>
			<div class="item" draggable="true" ondragstart="dragStart(event,'è€³æœº')">
				è€³æœº
			</div>
		</div>
		<div
			class="box2"
			ondrop="dropEnd(event)"
		></div>
	</body>

	<script>
		const box2 = document.querySelector('.box2')
		function dragStart(e, device) {
			e.dataTransfer.setData('device', device)
		}
		function dropEnd(e) {
			var transferredDevice = e.dataTransfer.getData('device')
			const div = document.createElement('div')
			div.textContent = transferredDevice
			div.classList.add('item')
			box2.appendChild(div)
		}
	</script>
</html>
```

æ ¸å¿ƒå°±æ˜¯è¿™ä¸¤æ­¥ï¼š

- ç»™éœ€è¦æ‹–æ‹½çš„å…ƒç´ åŠ ä¸Š`draggable = true` çš„å±æ€§ï¼ŒåŒæ—¶è®¾ç½®`ondragstart`çš„äº‹ä»¶å¤„ç†å‡½æ•°

  å¯ä»¥é€šè¿‡å¥æŸ„`e`ä¸­ä»¥`key,value`å­˜å‚¨æˆ‘ä»¬æƒ³è¦å­˜å‚¨çš„æ•°æ®

  `e.dataTransfer.setData('device', device)`

- ç»™å¯æ”¾ä¸‹æ‹–æ‹½çš„å®¹å™¨è®¾ç½®`ondrop`æ”¾æ‰‹äº‹ä»¶å¤„ç†å‡½æ•°

  å¯ä»¥é€šè¿‡å¥æŸ„eè·å–æˆ‘ä»¬ä¹‹å‰å­˜å‚¨çš„æ•°æ®

åŸºäºä»¥ä¸Šçš„ä¸¤æ­¥æˆ‘å°±å¯ä»¥å®Œæˆä¸€ä¸ªæ‹–æ‹½çš„ä»»åŠ¡äº†ã€‚

## å…¼å®¹æ€§

åœ¨[caniuse](https://caniuse.com/?search=drag)ä¸­æˆ‘ä»¬ä¹Ÿå¾—çŸ¥ï¼Œå¤§éƒ¨åˆ†ä¸»æµçš„æµè§ˆå™¨å…¶å®éƒ½æ˜¯å·²ç»æ”¯æŒçš„äº†ã€‚

![image-20231230104249719](https://image.jimmyxuexue.top/img/202312301042869.png)



## æ€»ç»“

æ‹–æ‹½å…¶å®æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆéš¾äº†ï¼Œä¹‹å‰æ²¡æœ‰è¿™ä¸ªapiä¹‹å‰å¯èƒ½å°±ç›¸å¯¹å¤æ‚è¦å¤„ç†å„ç§é¼ æ ‡äº‹ä»¶ï¼Œç°åœ¨ä¸€ä¸ªapiå°±å®Œæˆäº†ï¼Œåœ¨ä¸éœ€è¦è€ƒè™‘å…¼å®¹æ€§çš„æƒ…å†µä¸‹è¿˜æ˜¯å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„ä½¿ç”¨çš„~ğŸ˜„
