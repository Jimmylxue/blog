# ç‰›åˆ€å°è¯• æ‰‹æœºå·åŠ å¯†

çœ‹å®Œä¸‰ä¸ªå°èŠ‚çš„è¯¾ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬å¯ä»¥æ¥ä¸ªç®€å•çš„å°é¢˜ç›®æ¥ç†Ÿæ‚‰ä¸€ä¸‹TDDäº†ã€‚

> ä¸‹é¢æ˜¯ä¸€ä¸ªä¼ä¸šéå¸¸å¸¸è§çš„éœ€æ±‚

## åœºæ™¯

äº§å“ç»ç†ï¼š

å°è±ªå•Šï¼Œè¿è¥é‚£è¾¹åé¦ˆæˆ‘ä»¬ç³»ç»Ÿè¿™è¾¹çš„æ‰‹æœºå·æ²¡æœ‰åšåŠ å¯†ï¼Œéƒ½æ˜¯çœŸå®çš„æ‰‹æœºå·ï¼Œæˆ‘ä»¬ç»™å®ƒåšä¸ªåŠ å¯†å§ã€‚å°±åƒè¿™æ ·ï¼š`157****9999` è¿™æ ·ï¼Œä¸­é—´çš„å››ä½æ•°ç”¨æ˜Ÿå·è¡¨ç¤ºå°±å¥½äº†ã€‚

å°è±ªï¼š

å¥½çš„ã€‚è¿™ä¸ªå¾ˆå¿«ã€‚

![image-20230720221327630](https://image.jimmyxuexue.top/img/202307202213715.png)

## æ€è€ƒ

è¿™ä¸ªç¡®å®æ˜¯ä¸ªéå¸¸ç®€å•çš„éœ€æ±‚ã€‚å°±æ˜¯ç»™ä¸­é—´çš„å‡ ä½æ•°æ¢æˆ * ï¼Œæ¢å¹³å¸¸çš„å¼€å‘æ€è·¯æ˜¯ä¸æ˜¯ç›´æ¥å°±ä¸Šæ‰‹å†™ä»£ç å•¦ï¼Ÿ

æˆ‘ä»¬ç°åœ¨ç”¨ TDD çš„æ–¹å¼æ¥å†™ã€‚æˆ‘ä»¬éœ€è¦å…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š

> è¿™ä¸ªç¯èŠ‚æˆ‘ä»¬åº”è¯¥è¦æŠŠå„ç§æœ‰å¯èƒ½çš„è¾¹ç•Œæƒ…å†µéƒ½è€ƒè™‘è¿›å»ã€‚
>
> å‰ç«¯çš„æ•°æ®å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ¥æºäºåç«¯ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½100%ç›¸ä¿¡åç«¯çš„æ•°æ®ï¼Œäººéåœ£è´¤ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬æ¥æ”¶çš„æ•°æ®ä¹Ÿæœ‰å¯èƒ½æ˜¯é”™è¯¯çš„æ•°æ®æ ¼å¼ã€‚å¦‚ï¼šå’Œåç«¯å®šä¹‰çš„æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬æ”¶åˆ°äº†numberç±»å‹ï¼Œæˆ–è€…æ˜¯æ”¶åˆ°äº†undefinedï¼Œæˆ–è€…nullã€‚ä¸èƒ½è®©ç¨‹åºæŠ¥é”™ã€‚

```ts
// src/util/__test__/encryption.spec.ts
describe('>>> encryption_phone', () => {
	it('when phone is undefined', () => {
		expect(encryptionPhone(undefined)).toBe('')
	})

	it('when phone is null', () => {
		expect(encryptionPhone(undefined)).toBe('')
	})

	it("when phone is ''", () => {
		expect(encryptionPhone('')).toBe('')
	})

	it('when phone type of = number', () => {
		expect(encryptionPhone(15736379999)).toBe('157****9999')
	})

	it('when phone type of = string', () => {
		expect(encryptionPhone('15736379999')).toBe('157****9999')
	})
})
```

åŸºäºä»¥ä¸Šçš„å•æµ‹ï¼Œæˆ‘ä»¬å†æ¥è¿›è¡Œä¸€æ³¢ç¼–ç ï¼š

```ts
export function encryptionPhone(phone: any) {
	if (phone === undefined || phone === null) {
		return ''
	}
	const str = String(phone)
	return [...str]
		.map((char, index) => (index >= 3 && index <= 6 ? '*' : char))
		.join('')
}
```

ç¼–å†™å®Œä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å†è¿è¡Œå•æµ‹ï¼Œç»“æœå‘ç°æµ‹è¯•çš„ç»“æœæ˜¯å…¨éƒ¨é€šè¿‡ï¼
![image-20230720224121882](https://image.jimmyxuexue.top/img/202307202241936.png)

å½“çœ‹åˆ°è¿™ç»¿ç»¿çš„æ•ˆæœæµ‹è¯•é€šè¿‡ï¼Œå¿ƒä¸­ä¾¿è§‰ç¨³å¥ï¼Œå¯ä»¥æ”¾å¿ƒçš„ä¸Šçº¿äº†ï¼Œåç«¯ä¸ç®¡è¿”å›ä»€ä¹ˆï¼Œéƒ½ä¸ä¼šæŠ¥é”™ï¼Œä¸”éƒ½æ˜¯é¢„æœŸçš„è¿”å›ã€‚

## æ€»ç»“

æ€ä¹ˆæ ·ï¼é€šè¿‡è¿™ä¸ªå°demoæ„Ÿè§‰åˆ° TDD çš„å¥½å¤„äº†å§ï¼Œæˆ–è€…è¯´æ„Ÿè§‰åˆ°å†™ä¸€äº›å•æµ‹çš„å¥½å¤„äº†å§ğŸ˜„

æ€»ç»“ä¸‹æ¥å¤§å®¶åº”è¯¥ä¼šæœ‰å‘ç°æœ‰ä»¥ä¸‹çš„å¥½å¤„ï¼š

- æ€è€ƒå˜å¤šäº†

  æˆ‘ä»¬æå‰çš„æ€è€ƒäº†å¯èƒ½æ€§ï¼Œå†æ ¹æ®è¿™äº›å¯èƒ½æ€§å»é’ˆå¯¹æ€§çš„ç¼–ç ã€‚é™ä½äº†ä¸€äº›å¯èƒ½å‡ºç°çš„bugã€‚å¦‚æ²¡æœ‰æ„è¯†åˆ°å¯èƒ½åç«¯è¿”å›çš„æ•°æ®ç±»å‹é”™è¯¯äº†

- è‡ªå·±å¾—åˆ°æ»¡è¶³äº†

  çœ‹ç€è¿™ç»¿ç»¿çš„passï¼Œå¤ªçˆ½äº†

- çœå¿ƒäº†

  ä¸Šçº¿çš„ä»£ç ç»è¿‡äº†æˆ‘ä»¬è‡ªå·±çš„å•æµ‹ï¼ŒåŸºæœ¬ä¸ç”¨æ‹…å¿ƒçº¿ä¸Šé—®é¢˜ã€‚å°±ç®—çœŸçš„æœ‰ï¼Œä¹Ÿå°±æ˜¯è‡ªå·±ç¡®å®ç¼–å†™å•æµ‹é‚£ç¯èŠ‚æ²¡åšå¥½ï¼Œä¹Ÿæ˜¯åœ¨ç§¯ç´¯ç»éªŒï¼Œä¹‹ååªä¼šæ›´å¥½ã€‚

æœ€åæƒ³è¯´ï¼Œç¡®å® TDD éå¸¸å¸å¼•äººå§~ é‚£å¤§å®¶åŠ¨æ‰‹å§ï¼Œè¿™ä¸ªdemo è‡ªå·±ä¹Ÿå†™ä¸€éã€‚