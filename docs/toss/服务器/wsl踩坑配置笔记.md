# WSL 踩坑配置笔记

hello 大家好我是jimmy，最近我又在折腾wsl了，具体折腾的内容和上一篇博客差不多，只不过在复习的过程突然遇到了一个特别大的坑.... 现在给大家完整的回顾一下

## 问题回顾

当我windows装了wsl之后，我也给其装了一下宝塔面板。毕竟有时候还是会用到，看一些监控数据还是非常有用的。

![image-20251104165419914](https://image.jimmyxuexue.top/img/image-20251104165419914.png)

此时我是可以正常的在windows端的浏览器中输入 ` http://127.0.0.1:40811/581c94cb`的方式来进行访问的。

但是这时候我想这，我有另外一台局域网的设备，我想要通过局域网的方式来访问 WSL 中的服务时，就死活访问不了，如我的局域网IP是：`172.12.130.1`，正常只要是连了同一个网络的设备，是要可以通过`http://172.12.130.1:40811/581c94cb` 的方式来访问的，但是得到的结果一直是访问被拒绝。

于是我开始和deepseek，和一些博客的长时间对线，有各种设置windows防火墙的，有配置网关的，显然都不太对。一直研究了一个下午的时间。

## 解决问题

我相信这个问题一定是在 wsl 的配置上，我在博客上也有找到这个相关的配置，但是我把他复制到我的 wslconfig 文件上时  始终是不生效的。在一顿折腾之后，我发现了原因.....

我的 wslconfig 文件是不对的（是我之前还不了解的时候 手动创建的，创建的位置也是错的，导致一直对我进行着误导）

那么，怎样才能找到我们真正的配置文件在哪里呢？

我们其实只需要打开 windows的一个 文件管理器，在地址栏输入：`%USERPROFILE%` 这里面出现的 wslconfig 才是正确的

![image-20251104170352647](https://image.jimmyxuexue.top/img/image-20251104170352647.png)

找到这个文件之后，只需要将配置文件修改为如下：

```shell
[experimental]
networkingMode=Mirrored
dnsTunneling=true
firewall=true
autoProxy=true
hostAddressLoopback=true
```

之后我们在 windows 端的 powershell 中执行 wsl 的重启指令：`wsl --shutdown` 之后重启开启wsl窗口，我们的服务就可以正常在内网环境下访问了。

## 总结

原来原因如此之简单，跟deepseek battle了一下午，竟然这个原因，有点不能接收，但是更多的是对自己粗心马虎的懊恼。好在最终解决了。

有不明白的地方欢迎留言提问。